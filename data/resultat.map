<!DOCTYPE html>
<html>
<head>
    <title>Resultat previsions</title>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css" />
    <style type="text/css">
      html, body, #map {
          width: 100%;
          height: 100%;
          margin: 0;
      }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="http://leafletjs.com/dist/leaflet.js"></script>
    <script>

        function toSexagesimal(dec) {

            var tmp = (Math.abs(dec) + 1.e-9).toString().split('.');

            var deg = tmp[0];
            var min = ('0.' + tmp[1]) * 60;
            var sec = min.toString().split('.');

            min = Math.floor(min);
            sec = (('0.' + sec[1]) * 60).toFixed(0);

            if (sec == 60) {
                sec = 0;
                min++;
            }

            if (min == 60) {
                min = 0;
                deg++;
            }

            return (((dec < 0.) ? '-' : '+') + deg + 'Â° ' + ((min < 10) ? '0' + min : min) + "' " + ((sec < 10) ? '0' + sec : sec) + '"');
        }

	    var mapquestUrl = "http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",
		    mapquestSubDomains = ["otile1","otile2","otile3","otile4"],
		    mapquestAttrib = 'Data, imagery and map information provided by ' + '<a>MapQuest</a>, ' + '<a>OpenStreetMap</a> and ' + 'Map: <a>CC-BY-SA</a>',
		    mapquest = new L.TileLayer(mapquestUrl, {maxZoom: 18, attribution: mapquestAttrib, subdomains: mapquestSubDomains});

        map = L.map('map', {
		    center: new L.LatLng(LATITUDE_CENTRE, LONGITUDE_CENTRE), zoom: 9,
		    layers: [mapquest]
	    });

        var marker = new L.marker([LATITUDE_CENTRE, LONGITUDE_CENTRE]).addTo(map);

        var popup = L.popup();

        marker.on('mouseover', function onShowPopup(e) {
                    popup
                .setLatLng(e.latlng)
                .setContent("NOMLIEU_CENTRE<br />CHAINE_LONGITUDE : " + toSexagesimal(e.latlng.lng) + "<br />CHAINE_LATITUDE : " + toSexagesimal(e.latlng.lat))
                .openOn(map);
        });

        map.on('click', function(e) {
                    popup
                .setLatLng(e.latlng)
                .setContent("CHAINE_LONGITUDE : " + toSexagesimal(e.latlng.lng) + "<br />CHAINE_LATITUDE : " + toSexagesimal(e.latlng.lat))
                .openOn(map);
        });

        L.control.scale().addTo(map);

        if (LONGITUDE1 != 0. && LATITUDE1 != 0. && LONGITUDE2 != 0. && LATITUDE2 != 0.) {
            L.polygon([
                [LATITUDE1, LONGITUDE1],
                [LATITUDE2, LONGITUDE2]
            ]).addTo(map);
        }

    </script>
</body>
</html>
