<!DOCTYPE html>
<html>
<head>
    <title>Resultat previsions</title>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css" />
    <style type="text/css">
      html, body, #map {
          width: 100%;
          height: 100%;
          margin: 0;
      }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="http://leafletjs.com/dist/leaflet.js"></script>
    <script>

        function toSexagesimal(dec) {

            var tmp = (Math.abs(dec) + 1.e-9).toString().split('.');

            var deg = tmp[0];
            var min = ('0.' + tmp[1]) * 60;
            var sec = min.toString().split('.');

            min = Math.floor(min);
            sec = (('0.' + sec[1]) * 60).toFixed(0);

            if (sec == 60) {
                sec = 0;
                min++;
            }

            if (min == 60) {
                min = 0;
                deg++;
            }

            return (((dec < 0.) ? '-' : '+') + deg + '° ' + ((min < 10) ? '0' + min : min) + "' " + ((sec < 10) ? '0' + sec : sec) + '"');
        }

        var map = L.map('map').setView([LATITUDE_CENTRE, LONGITUDE_CENTRE], 9);

        L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a>OpenStreetMap</a> contributors, ' +
                '<a>CC-BY-SA</a>, ' +
                'Imagery © <a>Mapbox</a>',
            id: 'astropedia.ie3phjed'
        }).addTo(map);

        var marker = new L.marker([LATITUDE_CENTRE, LONGITUDE_CENTRE]).addTo(map);

        var popup = L.popup();

        marker.on('mouseover', function onShowPopup(e) {
                    popup
                .setLatLng(e.latlng)
                .setContent("NOMLIEU_CENTRE<br />CHAINE_LONGITUDE : " + toSexagesimal(e.latlng.lng) + "<br />CHAINE_LATITUDE : " + toSexagesimal(e.latlng.lat))
                .openOn(map);
        });

        map.on('click', function(e) {
                    popup
                .setLatLng(e.latlng)
                .setContent("CHAINE_LONGITUDE : " + toSexagesimal(e.latlng.lng) + "<br />CHAINE_LATITUDE : " + toSexagesimal(e.latlng.lat))
                .openOn(map);
        });

        L.control.scale().addTo(map);

        if (LONGITUDE1 != 0. && LATITUDE1 != 0. && LONGITUDE2 != 0. && LATITUDE2 != 0.) {
            L.polygon([
                [LATITUDE1, LONGITUDE1],
                [LATITUDE2, LONGITUDE2]
            ]).addTo(map);
        }

    </script>
</body>
</html>
